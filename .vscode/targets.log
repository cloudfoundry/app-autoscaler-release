make all --print-data-base --no-builtin-variables --no-builtin-rules --question
# GNU Make 3.81
# Copyright (C) 2006  Free Software Foundation, Inc.
# This is free software; see the source for copying conditions.
# There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

# This program built for i386-apple-darwin11.3.0
 
make: *** No rule to make target `all'.  Stop.


# Make data base, printed on Thu Dec 15 16:17:55 2022

# Variables

# environment
VSCODE_GIT_ASKPASS_MAIN = /Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js
# automatic
 
<D = $(patsubst %/,%,$(dir $<))
# automatic
?F = $(notdir $?)
# environment
ELECTRON_NO_ATTACH_CONSOLE = 1
# makefile (from `Makefile', line 22)
DEST = build
# automatic
?D = $(patsubst %/,%,$(dir $?))
# automatic
@D = $(patsubst %/,%,$(dir $@))
# automatic
@F = $(notdir $@)
# makefile
CURDIR := /Users/C5349221/SAPDevelop/app-autoscaler-release
# makefile (from `Makefile', line 1)
SHELL := /bin/bash
# environment
VSCODE_NLS_CONFIG = {"locale":"en-gb","availableLanguages":{},"_languagePackSupport":true}
# environment
_ = /usr/bin/make
# environment
GITHUB_TOKEN = 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
# environment
STARSHIP_SESSION_KEY = 1376022400193327
# makefile (from `Makefile', line 4)
go_modules := acceptance autoscaler changelog changeloglockcleaner
# makefile (from `Makefile', line 13)
DEBUG := false
# environment
VSCODE_INJECTION = 1
# makefile (from `Makefile', line 21)
VERSION = 0.0.testing
# makefile (from `Makefile', line 24)
BUILDIN_MODE = false
# environment
__CFBundleIdentifier = com.microsoft.VSCode
# makefile (from `Makefile', line 14)
MYSQL_TAG := 8
# environment
VSCODE_CWD = /Users/C5349221/SAPDevelop/app-runtime-interfaces-infrastructure/terragrunt/github-arc-team-autoscaler-ci-bot-wg-ci-test
# environment
PATH = /usr/local/opt/libpq/bin:/Users/C5349221/.asdf/shims:/usr/local/opt/asdf/libexec/bin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/Privileges.app/Contents/Resources:/usr/local/opt/libpq/bin:/opt/local/bin:/opt/local/sbin:/Users/C5349221/.cargo/bin
# makefile (from `Makefile', line 17)
AUTOSCALER_DIR = $(shell pwd)
# environment
LSCOLORS = Gxfxcxdxbxegedabagacad
# makefile (from `Makefile', line 26)
ACCEPTANCE_TESTS_FILE = ${DEST}/app-autoscaler-acceptance-tests-v${VERSION}.tgz
# makefile (from `Makefile', line 1)
MAKEFILE_LIST :=  Makefile
# environment
ZDOTDIR = /Users/C5349221
# environment
LaunchInstanceID = 6F03E388-7E85-4A45-B3C9-F0FB0A07AC40
# environment
ELECTRON_RUN_AS_NODE = 1
# makefile (from `Makefile', line 19)
CI_DIR = ${AUTOSCALER_DIR}/ci
# default
.FEATURES := target-specific order-only second-expansion else-if archives jobserver check-symlink
# environment
SSH_AUTH_SOCK = /private/tmp/com.apple.launchd.oxVDecD1OH/Listeners
# automatic
%F = $(notdir $%)
# makefile (from `Makefile', line 5)
all_modules := acceptance autoscaler changelog changeloglockcleaner db scheduler
# environment
PWD = /Users/C5349221/SAPDevelop/app-autoscaler-release
# environment
ORIGINAL_XDG_CURRENT_DESKTOP = undefined
# environment
VSCODE_AMD_ENTRYPOINT = vs/workbench/api/node/extensionHostProcess
# environment
HOME = /Users/C5349221
# makefile (from `Makefile', line 16)
SUITES = broker api app
# default
MAKEFILEPATH = $(shell /usr/bin/xcode-select -print-path 2>/dev/null || echo /Developer)/Makefiles
# environment
VSCODE_CLI = 1
# environment
VSCODE_CODE_CACHE_PATH = /Users/C5349221/Library/Application Support/Code/CachedData/5235c6bb189b60b01b1f49062f4ffa42384f8c91
# environment
LOGNAME = C5349221
# environment
APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL = 1
# environment
ZSH = /Users/C5349221/.oh-my-zsh
# environment
VSCODE_HANDLES_UNCAUGHT_ERRORS = true
# automatic
^D = $(patsubst %/,%,$(dir $^))
# environment
MAKELEVEL := 0
# environment
XPC_FLAGS = 0x0
# environment
COLORTERM = truecolor
# default
MAKE = $(MAKE_COMMAND)
# environment
LC_TERMINAL = iTerm2
# makefile (from `Makefile', line 20)
CI = false
# environment
SHLVL = 5
# makefile (from `Makefile', line 9)
db_type := postgres
# default
MAKE_VERSION := 3.81
# environment
USER = C5349221
# makefile
.DEFAULT_GOAL := list-modules
# default
MAKECMDGOALS := all
# environment
TERM_SESSION_ID = w0t0p0:81530208-1B9A-4561-AD98-AAFB178B86BD
# makefile (from `Makefile', line 15)
POSTGRES_TAG := 12
# environment
LESS = -R
# automatic
%D = $(patsubst %/,%,$(dir $%))
# default
MAKE_COMMAND := /Library/Developer/CommandLineTools/usr/bin/make
# environment
VSCODE_GIT_ASKPASS_EXTRA_ARGS = --ms-enable-electron-run-as-node
# environment
TERM_PROGRAM = vscode
# default
.VARIABLES := 
# environment
TMPDIR = /var/folders/10/96dt8h191l94w17pmwg3sxgh0000gn/T/
# automatic
*F = $(notdir $*)
# makefile (from `Makefile', line 8)
OS := Darwin
# environment
VSCODE_IPC_HOOK = /Users/C5349221/Library/Application Support/Code/1.74.0-main.sock
# environment
VSCODE_GIT_ASKPASS_NODE = /Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper.app/Contents/MacOS/Code Helper
# environment
MallocNanoZone = 0
# makefile
MAKEFLAGS = sRrqp
# environment
MFLAGS = -sRrqp
# automatic
*D = $(patsubst %/,%,$(dir $*))
# environment
TERM_PROGRAM_VERSION = 1.74.0
# makefile (from `Makefile', line 6)
.SHELLFLAGS := -eu -o pipefail -c 
# environment
XPC_SERVICE_NAME = application.com.microsoft.VSCode.14789275.14789281.19AB07BA-5E22-4416-A288-03DF07D57EB6
# makefile (from `Makefile', line 10)
DBURL := postgres://postgres:postgres@localhost/autoscaler?sslmode=disable
# environment
LC_TERMINAL_VERSION = 3.4.18
# automatic
+D = $(patsubst %/,%,$(dir $+))
# automatic
+F = $(notdir $+)
# environment
ITERM_SESSION_ID = w0t0p0:81530208-1B9A-4561-AD98-AAFB178B86BD
# environment
COLORFGBG = 15;0
# environment
__CF_USER_TEXT_ENCODING = 0x1F5:0x0:0x2
# environment
COMMAND_MODE = unix2003
# environment
GIT_ASKPASS = /Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh
# default
MAKEFILES := 
# automatic
<F = $(notdir $<)
# environment
ITERM_PROFILE = Default
# environment
USER_ZDOTDIR = /Users/C5349221
# environment
PAGER = less
# environment
LC_ALL = C
# makefile (from `Makefile', line 7)
MVN_OPTS = "-Dmaven.test.skip=true"
# environment
SECURITYSESSIONID = 186a8
# automatic
 
^F = $(notdir $^)
# default
SUFFIXES := 
# environment
ASDF_DIR = /usr/local/opt/asdf/libexec
# makefile (from `Makefile', line 18)
lint_config := /Users/C5349221/SAPDevelop/app-autoscaler-release/.golangci.yaml
# default
.INCLUDE_DIRS = /usr/local/include
# environment
VSCODE_GIT_IPC_HANDLE = /var/folders/10/96dt8h191l94w17pmwg3sxgh0000gn/T/vscode-git-3082a7e52a.sock
# environment
LANG = C
# environment
TERM = xterm-256color
# environment
VSCODE_PID = 31534
# environment
STARSHIP_SHELL = zsh
# variable set hash-table stats:
# Load=107/1024=10%, Rehash=0, Collisions=15/172=9%

# Pattern-specific Variable Values

# No pattern-specific variable values.

# Directories

# . (device 16777220, inode 371820): 44 files, no impossibilities.

# 44 files, no impossibilities in 1 directories.

# Implicit Rules

# No implicit rules.

# Files

changeloglockcleaner: init
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 105):
	@make -C src/changeloglockcleaner build
	

test-scheduler: check-db_type init init-db test-certs
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 132):
	@cd src && mvn test --no-transfer-progress -Dspring.profiles.include=${db_type} && cd ..
	

target/autoscaler_test_certs:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 116):
	@./scripts/generate_test_certs.sh
	@touch $@
	

run-act:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 380):
	${AUTOSCALER_DIR}/scripts/run_act.sh;\
	

lint-actions:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 251):
	@echo " - linting GitHub actions"
	go run github.com/rhysd/actionlint/cmd/actionlint@latest
	

check-db_type:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 36):
	@case "${db_type}" in\
	(mysql|postgres) echo " - using bd:${db_type}"; ;;\
	(*) echo "ERROR: db_type needs to be one of mysql|postgres"; exit 1;;\
	esac
	

docker-login: target/docker-login
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

stop-db: check-db_type
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 212):
	@echo " - Stopping ${db_type}"
	@rm target/start-db-${db_type} &> /dev/null || echo " - Seems the make target was deleted stopping anyway!"
	@docker rm -f ${db_type} &> /dev/null || echo " - we could not stop and remove docker named '${db_type}'"
	

clean-build:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 58):
	@rm -rf build | true
	

rubocop:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 235):
	@echo " - ruby scripts"
	@bundle install
	@bundle exec rubocop ./spec ./packages
	

# Not a target:
all:
#  Command-line target.
#  Implicit rule search has been done.
#  File does not exist.
#  File has not been updated.
# variable set hash-table stats:
# Load=0/32=0%, Rehash=0, Collisions=0/0=0%

test-acceptance-unit:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 138):
	@make -C src/acceptance test-unit
	

target/scheduler_test_certs:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 119):
	@./src/scheduler/scripts/generate_unit_test_certs.sh
	@touch $@
	

clean-bosh-release:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 80):
	@echo " - cleaning bosh dev releases"
	@rm -rf dev_releases
	@rm -rf .dev_builds
	

.PHONY: check-type init-db init clean-autoscaler clean-java clean-vendor clean-acceptance build build-test build-tests build-all acceptance autoscaler changelog changeloglockcleaner db scheduler test-certs test test-autoscaler test-scheduler test-changelog test-changeloglockcleaner start-db waitfor_postgres_CI_false waitfor_postgres_CI_true waitfor_mysql_CI_false waitfor_mysql_CI_true stop-db integration lint lint_acceptance lint_autoscaler lint_changelog lint_changeloglockcleaner eslint markdownlint lint-actions spec-test release vendor-app acceptance-release mod-tidy mod-download vendor fakes workspace uuac markdownlint-cli deploy-autoscaler deploy-register-cf deploy-autoscaler-bosh deploy-cleanup acceptance-tests cleanup-concourse cf-login setup-performance run-performance run-act alerts-silence docker-login docker docker-image build-tools
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.

mod-download:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 293):
	@for folder in $$(find . -maxdepth 3 -name "go.mod" -exec dirname {} \;);\
	do\
	cd $${folder}; echo " - go mod download '$${folder}'"; go mod download; cd - >/dev/null;\
	done
	

test_acceptance:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 109):
	@echo "# Compiling '$(patsubst test_%,%,$@)' tests"
	@make -C src/$(patsubst test_%,%,$@) build_tests
	

clean-java:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 60):
	@echo " - cleaning java resources"
	@cd src && mvn clean > /dev/null && cd ..
	

package-specs: mod-tidy vendor
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 383):
	@echo " - Updating the package specs"
	@./scripts/sync-package-specs
	

target/start-db-postgres_CI_false:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 147):
	@if [ ! "$(shell docker ps -q -f name="^${db_type}")" ]; then \
	if [ "$(shell docker ps -aq -f status=exited -f name="^${db_type}")" ]; then \
	docker rm ${db_type}; \
	fi;\
	echo " - starting docker for ${db_type}";\
	docker run -p 5432:5432 --name postgres \
	-e POSTGRES_PASSWORD=postgres \
	-e POSTGRES_USER=postgres \
	-e POSTGRES_DB=autoscaler \
	--health-cmd pg_isready \
	--health-interval 1s \
	--health-timeout 2s \
	--health-retries 10 \
	-d \
	postgres:${POSTGRES_TAG} >/dev/null;\
	else echo " - $@ already up'"; fi;
	@touch $@
	

build/autoscaler-test.tgz:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 266):
	@echo " - building bosh release into build/autoscaler-test.tgz"
	@mkdir -p build
	@bosh create-release --force --timestamp-version --tarball=build/autoscaler-test.tgz
	

build-tests: build-test
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

mod-tidy:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
 
#  File has not been updated.
#  commands to execute (from `Makefile', line 286):
	@for folder in $$(find . -maxdepth 3 -name "go.mod" -exec dirname {} \;);\
	do\
	cd $${folder}; echo " - go mod tidying '$${folder}'"; go mod tidy; cd - >/dev/null;\
	done
	

check-type:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

clean-certs:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 74):
	@echo " - cleaning test certs"
	@rm -f testcerts/*
	

integration: build init-db test-certs
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 218):
	@echo " - using DBURL=${DBURL} OPTS=${OPTS}"
	make -C src/autoscaler integration DBURL="${DBURL}" OPTS="${OPTS}"
	

waitfor_mysql_CI_true:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 198):
	@echo -n " - Waiting for table creation "
	@which mysql >/dev/null &&\
	{\
	T=0;\
	until [[ ! -z "$(shell mysql -u "root" -h "127.0.0.1"  --port=3306 -qfsBe "SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME='autoscaler'" 2> /dev/null)" ]]\
	|| [[ $${T} -gt 30 ]];\
	do echo -n "."; sleep 1; T=$$((T+1)); done;\
	}
	@[ ! -z "$(shell mysql -u "root" -h "127.0.0.1" --port=3306 -qfsBe "SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME='autoscaler'"  2> /dev/null)" ]\
	|| { echo "ERROR: Mysql timed out creating database"; exit 1; }
	

acceptance-cleanup:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 349):
	${CI_DIR}/autoscaler/scripts/cleanup-acceptance.sh;
	

vendor-app: target/vendor-app
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

# Not a target:
.SUFFIXES:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.

uaac:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 317):
	which uaac || gem install cf-uaac
	

build-test: init test_acceptance test_autoscaler test_changelog test_changeloglockcleaner
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

# Not a target:
Makefile:
#  Implicit rule search has been done.
#  Last modified 2022-12-01 11:22:51
#  File has been updated.
#  Successfully updated.
# variable set hash-table stats:
# Load=0/32=0%, Rehash=0, Collisions=0/0=0%

deploy-autoscaler-bosh:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 330):
	echo " - deploying autoscaler"
	DEBUG="${DEBUG}" ${CI_DIR}/autoscaler/scripts/deploy-autoscaler.sh
	

deploy-cleanup:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 341):
	@echo " - Cleaning up deployment '${DEPLOYMENT_NAME}'";\
	${CI_DIR}/autoscaler/scripts/cleanup-autoscaler.sh;
	

markdownlint-cli:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 321):
	which markdownlint || npm install -g --omit=dev markdownlint-cli
	

test: test-autoscaler test-scheduler test-changelog test-changeloglockcleaner test-acceptance-unit
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

test-certs: target/autoscaler_test_certs target/scheduler_test_certs
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

clean-vendor:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 66):
	@echo " - cleaning vendored go"
	@find . -name "vendor" -type d -depth -exec rm -rf {} \;
	

build: init acceptance autoscaler changelog changeloglockcleaner db scheduler
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

lint_changelog:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  Implicit/static pattern stem: `changelog'
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 255):
	@echo " - linting: $(patsubst lint_%,%,$@)"
	@pushd src/$(patsubst lint_%,%,$@) >/dev/null && golangci-lint run --path-prefix=src/$(patsubst lint_%,%,$@) --config ${lint_config} ${OPTS}
	

clean-autoscaler:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 69):
	@make -C src/autoscaler clean
	

start-db: check-db_type target/start-db-postgres_CI_false waitfor_postgres_CI_false
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 143):
	@echo " SUCCESS"
	

bosh-release: mod-tidy vendor scheduler db build/autoscaler-test.tgz
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.

clean-scheduler:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 71):
	@echo " - cleaning scheduler test resources"
	@rm -rf src/scheduler/src/test/resources/certs
	

clean-acceptance:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 84):
	@echo " - cleaning acceptance"
	@rm src/acceptance/acceptance_config.json &> /dev/null || true
	@rm src/acceptance/ginkgo* &> /dev/null || true
	@rm -rf src/acceptance/results &> /dev/null || true
	

acceptance-release: clean-acceptance mod-tidy vendor vendor-app
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 281):
	@echo " - building acceptance test release '${VERSION}' to dir: '${DEST}' "
	@mkdir -p ${DEST}
	@tar --create --auto-compress --directory="src" --file="${ACCEPTANCE_TESTS_FILE}" 'acceptance'
	

spec-test:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 260):
	bundle install
	bundle exec rspec
	

build-all: build build-test
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

fakes:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 307):
	@make -C src/autoscaler fakes
	

test-changelog: init
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 134):
	@make -C src/changelog test
	

target/start-db-mysql_CI_true:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
 
#  commands to execute (from `Makefile', line 190):
	@echo " - $@ already up'"
	

target/docker-login:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 402):
	gcloud auth login
	docker login ghcr.io
	@touch $@
	

lint_changeloglockcleaner:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  Implicit/static pattern stem: `changeloglockcleaner'
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 255):
	@echo " - linting: $(patsubst lint_%,%,$@)"
	@pushd src/$(patsubst lint_%,%,$@) >/dev/null && golangci-lint run --path-prefix=src/$(patsubst lint_%,%,$@) --config ${lint_config} ${OPTS}
	

scheduler: init
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 100):
	@echo "# building $@"
	@cd src && mvn --no-transfer-progress package -pl scheduler ${MVN_OPTS} && cd ..
	

db: target/db
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

deploy-autoscaler: mod-tidy vendor uaac db scheduler deploy-autoscaler-bosh deploy-register-cf
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

clean-node:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 77):
	@echo " - cleaning node modules"
	@rm -rf src/acceptance/assets/app/nodeApp/node_modules
	

workspace:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 312):
	[ -e go.work ] || go work init
	go work use $(addprefix ./src/,$(go_modules))
	

waitfor_postgres_CI_true:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 171):
	@echo " - no ci postgres checks"
	

test-changeloglockcleaner: init init-db test-certs
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 136):
	@make -C src/changeloglockcleaner test DBURL="${DBURL}"
	

release:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

acceptance-tests: vendor-app
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 346):
	${CI_DIR}/autoscaler/scripts/run-acceptance-tests.sh;
	

# Not a target:
.DEFAULT:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.

lint_autoscaler:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  Implicit/static pattern stem: `autoscaler'
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 255):
	@echo " - linting: $(patsubst lint_%,%,$@)"
	@pushd src/$(patsubst lint_%,%,$@) >/dev/null && golangci-lint run --path-prefix=src/$(patsubst lint_%,%,$@) --config ${lint_config} ${OPTS}
	

golangci-lint_check:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 226):
	@current_version=$(shell golangci-lint version | cut -d " " -f 4);\
	current_major_version=$(shell golangci-lint version | cut -d " " -f 4| sed -E 's/v*([0-9]+\.[0-9]+)\..*/\1/');\
	expected_version=$(shell cat src/autoscaler/go.mod | grep golangci-lint  | cut -d " " -f 2 | sed -E 's/v([0-9]+\.[0-9]+)\..*/\1/');\
	if [ "$${current_major_version}" != "$${expected_version}" ]; then \
	echo "ERROR: Expected to have golangci-lint version '$${expected_version}.x' but we have $${current_version}";\
	exit 1;\
	fi
	

eslint:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 241):
	@echo " - linting testApp"
	@cd src/acceptance/assets/app/nodeApp && npm install && npm run lint
	

deploy-prometheus:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 335):
	@export DEPLOYMENT_NAME=prometheus;\
	export BBL_STATE_PATH=$${BBL_STATE_PATH:-$(shell realpath "../app-autoscaler-env-bbl-state/bbl-state/")};\
	${CI_DIR}/infrastructure/scripts/deploy-prometheus.sh;
	

waitfor_mysql_CI_false:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 192):
	@echo -n " - waiting for ${db_type} ."
	@until docker exec mysql mysqladmin ping &>/dev/null ; do echo -n "."; sleep 1; done
	@echo " SUCCESS"
	@echo -n " - Waiting for table creation ."
	@until [[ ! -z `docker exec mysql mysql -qfsBe "SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME='autoscaler'" 2> /dev/null` ]]; do echo -n "."; sleep 1; done
	

lint_acceptance:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  Implicit/static pattern stem: `acceptance'
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 255):
	@echo " - linting: $(patsubst lint_%,%,$@)"
	@pushd src/$(patsubst lint_%,%,$@) >/dev/null && golangci-lint run --path-prefix=src/$(patsubst lint_%,%,$@) --config ${lint_config} ${OPTS}
	

cf-login:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 358):
	@${CI_DIR}/autoscaler/scripts/cf-login.sh
	

setup-performance:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 362):
	export GINKGO_OPTS="";\
	export SKIP_TEARDOWN=true;\
	export NODES=1;\
	export DEPLOYMENT_NAME="autoscaler-performance";\
	export SUITES="setup_performance";\
	${CI_DIR}/autoscaler/scripts/run-acceptance-tests.sh;\
	

clean: clean-vendor clean-autoscaler clean-java clean-targets clean-scheduler clean-certs clean-bosh-release clean-node clean-build clean-acceptance
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 55):
	@make stop-db db_type=mysql
	@make stop-db db_type=postgres
	

test-autoscaler-suite: check-db_type init init-db test-certs
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 129):
	@echo " - using DBURL=${DBURL} TEST=${TEST} OPTS=${OPTS}"
	@make -C src/autoscaler testsuite TEST=${TEST} DBURL="${DBURL}" OPTS="${OPTS}"
	

autoscaler: init
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 103):
	@make -C src/autoscaler build
	

test_autoscaler:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 109):
	@echo "# Compiling '$(patsubst test_%,%,$@)' tests"
	@make -C src/$(patsubst test_%,%,$@) build_tests
	

docker:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

alerts-silence:
#  Phony target (prerequisite of .PHONY).
 
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 390):
	export SILENCE_TIME_MINS=480;\
	echo " - Silencing deployment '${DEPLOYMENT_NAME} 8 hours'";\
	${CI_DIR}/autoscaler/scripts/silence_prometheus_alert.sh BOSHJobProcessExtendedUnhealthy ;\
	${CI_DIR}/autoscaler/scripts/silence_prometheus_alert.sh BOSHJobProcessUnhealthy ;\
	${CI_DIR}/autoscaler/scripts/silence_prometheus_alert.sh BOSHJobExtendedUnhealthy ;\
	${CI_DIR}/autoscaler/scripts/silence_prometheus_alert.sh BOSHJobProcessUnhealthy ;\
	${CI_DIR}/autoscaler/scripts/silence_prometheus_alert.sh BOSHJobEphemeralDiskPredictWillFill ;\
	${CI_DIR}/autoscaler/scripts/silence_prometheus_alert.sh BOSHJobUnhealthy ;
	

uuac:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

acceptance:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

list-modules:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 32):
	@echo ${go_modules}
	

init: target/init
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

target/start-db-postgres_CI_true:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 165):
	@echo " - $@ already up'"
	

docker-image: docker-login
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 406):
	docker build -t ghcr.io/cloudfoundry/app-autoscaler-release-tools:latest  ci/dockerfiles/autoscaler-tools
	docker push ghcr.io/cloudfoundry/app-autoscaler-release-tools:latest
	

run-performance:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 371):
	export GINKGO_OPTS="";\
	export SKIP_TEARDOWN=true;\
	export NODES=1;\
	export DEPLOYMENT_NAME="autoscaler-performance";\
	export SUITES="run_performance";\
	${CI_DIR}/autoscaler/scripts/run-acceptance-tests.sh;\
	

init-db: check-db_type start-db db target/init-db-postgres
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

target/vendor-app:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 273):
	@echo " - installing node modules to package node app"
	@cd src/acceptance/assets/app/nodeApp > /dev/null\
	&& npm install --omit=dev\
	&& npm prune --omit=dev
	@touch $@
	

lint: golangci-lint_check lint_acceptance lint_autoscaler lint_changelog lint_changeloglockcleaner eslint rubocop
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.

cleanup-concourse:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 354):
	@${CI_DIR}/autoscaler/scripts/cleanup-concourse.sh
	

test_changelog:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 109):
	@echo "# Compiling '$(patsubst test_%,%,$@)' tests"
	@make -C src/$(patsubst test_%,%,$@) build_tests
	

deploy-register-cf:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 326):
	echo " - registering broker with cf"
	[ "$${BUILDIN_MODE}" == "false" ] && { ${CI_DIR}/autoscaler/scripts/register-broker.sh; } || echo " - Not registering broker due to buildin mode enabled"
	

target/db:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 96):
	@echo "# building $@"
	@cd src && mvn --no-transfer-progress package -pl db ${MVN_OPTS} && cd ..
	@touch $@
	

target/start-db-mysql_CI_false:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 175):
	@if [  ! "$(shell docker ps -q -f name="^${db_type}")" ]; then \
	if [ "$(shell docker ps -aq -f status=exited -f name="^${db_type}")" ]; then \
	docker rm ${db_type}; \
	fi;\
	echo " - starting docker for ${db_type}";\
	docker pull mysql:${MYSQL_TAG}; \
	docker run -p 3306:3306  --name mysql \
	-e MYSQL_ALLOW_EMPTY_PASSWORD=true \
	-e MYSQL_DATABASE=autoscaler \
	-d \
	mysql:${MYSQL_TAG} \
	>/dev/null;\
	else echo " - $@ already up"; fi;
	@touch $@
	

changelog: init
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 107):
	@make -C src/changelog build
	

target/init:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 50):
	@make -C src/autoscaler buildtools
	@touch $@
	

build-tools:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 411):
	make -C src/autoscaler buildtools
	

clean-targets:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 63):
	@echo " - cleaning build target files"
	@rm target/* &> /dev/null || echo "  . Already clean"
	

vendor:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 300):
	@for folder in $$(find . -maxdepth 3 -name "go.mod" -exec dirname {} \;);\
	do\
	cd $${folder}; echo " - go mod vendor '$${folder}'"; go mod vendor; cd - >/dev/null;\
	done
	

target/init-db-postgres:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 44):
	@./scripts/initialise_db.sh ${db_type}
	@touch $@
	

test_changeloglockcleaner:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  commands to execute (from `Makefile', line 109):
	@echo "# Compiling '$(patsubst test_%,%,$@)' tests"
	@make -C src/$(patsubst test_%,%,$@) build_tests
	

markdownlint: markdownlint-cli
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 246):
	@echo " - linting markdown files"
	@markdownlint .
	

waitfor_postgres_CI_false:
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 167):
	@echo -n " - waiting for ${db_type} ."
	@COUNTER=0; until $$(docker exec postgres pg_isready &>/dev/null) || [ $$COUNTER -gt 10 ]; do echo -n "."; sleep 1; let COUNTER+=1; done;\
	if [ $$COUNTER -gt 10 ]; then echo; echo "Error: timed out waiting for postgres. Try \"make clean\" first." >&2 ; exit 1; fi
	

test-autoscaler: check-db_type init init-db test-certs
#  Phony target (prerequisite of .PHONY).
#  Implicit rule search has not been done.
#  File does not exist.
#  File has not been updated.
#  commands to execute (from `Makefile', line 126):
	@echo " - using DBURL=${DBURL} OPTS=${OPTS}"
 
	@make -C src/autoscaler test DBURL="${DBURL}" OPTS="${OPTS}"
	

# files hash-table stats:
# Load=103/1024=10%, Rehash=0, Collisions=12/311=4%
# VPATH Search Paths

# No `vpath' search paths.

# No general (`VPATH' variable) search path.

# # of strings in strcache: 1
# # of strcache buffers: 1
# strcache size: total = 4096 / max = 4096 / min = 4096 / avg = 4096
# strcache free: total = 4087 / max = 4087 / min = 4087 / avg = 4087

# Finished Make data base on Thu Dec 15 16:17:55 2022

 
